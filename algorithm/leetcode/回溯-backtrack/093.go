/*
	ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸²ï¼Œç”¨ä»¥è¡¨ç¤ºä¸€ä¸ª IP åœ°å€ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½ä» s è·å¾—çš„ æœ‰æ•ˆ IP åœ°å€ ã€‚ä½ å¯ä»¥æŒ‰ä»»ä½•é¡ºåºè¿”å›ç­”æ¡ˆã€‚
	æœ‰æ•ˆ IP åœ°å€ æ­£å¥½ç”±å››ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•´æ•°ä½äº 0 åˆ° 255 ä¹‹é—´ç»„æˆï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼ 0ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨ '.' åˆ†éš”ã€‚
	ä¾‹å¦‚ï¼š"0.1.2.201" å’Œ "192.168.1.1" æ˜¯ æœ‰æ•ˆ IP åœ°å€ï¼Œä½†æ˜¯ "0.011.255.245"ã€"192.168.1.312" å’Œ "192.168@1.1" æ˜¯ æ— æ•ˆ IP åœ°å€ã€‚
*/

/*
	æ–¹æ³•1ï¼šå›æº¯+åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯åˆæ³•ipæ®µ
	0110 å¢¨è¿¹äº†ä¸€ä¸ªå°æ—¶æ‰å†™å®Œ
*/
var ans []string
var path string
var str string

func restoreIpAddresses(s string) []string {
	if len(s) > 12 {
		return ans
	}
	// åªæ˜¯ä¸ºäº†æäº¤ï¼Œleetcodeæäº¤æ—¶ï¼Œans ä¼šæ‹¼æ¥ä¹‹å‰æäº¤çš„ç»“æœ
	ans = make([]string,0)
    path = ""
    str = s
	backtrack(0, 0)
	return ans
}

/*
   start: æœç´¢çš„èµ·å§‹ä½ç½®
   pointNum: æ·»åŠ é€—ç‚¹çš„æ•°é‡
*/
func backtrack(start int, pointNum int) {
	// ğŸ˜…ğŸ˜… base case é€—ç‚¹æ•°é‡ä¸º3æ—¶ï¼Œåˆ†éš”ç»“æŸï¼›åˆ¤æ–­ç¬¬å››æ®µå­å­—ç¬¦ä¸²æ˜¯å¦åˆæ³•ï¼Œå¦‚æœåˆæ³•å°±æ”¾è¿›pathä¸­
	if pointNum == 3 && valid(start, len(str)-1) {
		// ğŸ˜…ğŸ˜… è¿™é‡Œè¦æ‹¼æ¥æœ€åä¸€æ­¥çš„åˆæ³•å­—ç¬¦ä¸²
		path += str[start:len(str)]
		ans = append(ans, path)
		return
	}
	for i := start; i < len(str); i++ {
		// åˆ¤æ–­ [start,i] è¿™ä¸ªåŒºé—´çš„å­ä¸²æ˜¯å¦åˆæ³•
		if valid(start, i) {
			oLen := len(path)
			// ğŸ˜… æ³¨æ„sliceå–å€¼ï¼Œå·¦é—­å³å¼€ï¼Œæ‰€ä»¥è¿™é‡Œå–ã€i+1ã€‘
			path += str[start:i+1] + "."
			pointNum++
			// ğŸ˜… è¿™é‡Œæ˜¯i+1,å¦‚æœå†™æˆiä¼šæ­»å¾ªç¯
			backtrack(i+1, pointNum)
			// ğŸ˜… å›æº¯
			pointNum--
			path = path[:oLen]
		} else {
			continue
		}
	}
}

/*
	ğŸ˜… åˆ¤æ–­å­—ç¬¦ä¸²såœ¨ã€å·¦é—­å³é—­ã€‘åŒºé—´[start, end]æ‰€ç»„æˆçš„æ•°å­—æ˜¯å¦åˆæ³•
	ï¼ˆ1ï¼‰æ®µä½ä»¥0ä¸ºå¼€å¤´çš„æ•°å­—ä¸åˆæ³•
	ï¼ˆ2ï¼‰æ®µä½é‡Œæœ‰éæ­£æ•´æ•°å­—ç¬¦ä¸åˆæ³•
	ï¼ˆ3ï¼‰æ®µä½å¦‚æœå¤§äº255äº†ä¸åˆæ³•
*/
func valid(start, end int) bool {
	if start > end {
		return false
	}
	// 0å¼€å¤´çš„æ•°å­—ä¸åˆæ³•
	if str[start] == '0' && start != end {
		return false
	}
	num := 0
	// ğŸ˜…ğŸ˜…ğŸ˜… åŒ…æ‹¬startã€endä¸¤ä¸ªç«¯ç‚¹ï¼Œæ‰€ä»¥è¿™é‡Œã€i<=endã€‘
	for i := start; i <= end; i++ {
		// éæ•°å­—ä¸åˆæ³•
		if str[i] > '9' || str[i] < '0' {
			return false
		}
		num = num*10 + int(str[i]-'0')
		// å¤§äº255ä¸åˆæ³•
		if num > 255 {
			return false
		}
	}
	return true
}