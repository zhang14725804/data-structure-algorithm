/*
	ç»™å®šä¸€ä¸ªæ— åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ã€‚

	ä½ ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸ºÂ O(n2) ã€‚
	è¿›é˜¶: ä½ èƒ½å°†ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é™ä½åˆ°Â O(n log n) å—?

	åŠ¨æ€è§„åˆ’æ€è·¯ï¼š
	ï¼ˆ1ï¼‰çŠ¶æ€è¡¨ç¤ºã€‚é›†åˆï¼ˆæ‰€æœ‰ä»¥iç»“å°¾çš„ä¸Šå‡å­åºåˆ—ï¼‰ï¼Œå±æ€§ï¼šé•¿åº¦æœ€å¤§å€¼
	ï¼ˆ2ï¼‰çŠ¶æ€è®¡ç®—ã€‚
*/

func lengthOfLIS1(nums []int) int {
	n := len(nums)
	// è¡¨ç¤ºä»¥ç¬¬ i ä¸ªæ•°å­—ä¸ºç»“å°¾çš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦
	dp := make([]int, n)
	var res int
	for i := 0; i < n; i++ {
		// dp[i] æ‰€æœ‰å…ƒç´ ç½® 1ï¼Œå«ä¹‰æ˜¯æ¯ä¸ªå…ƒç´ éƒ½è‡³å°‘å¯ä»¥å•ç‹¬æˆä¸ºå­åºåˆ—ï¼Œæ­¤æ—¶é•¿åº¦éƒ½ä¸º 1ã€‚
		dp[i] = 1
		for j := 0; j < i; j++ {
			// å¦‚æœå‰è¾¹çš„æŸä¸ªæ•° nums[j] < nums[i] ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†ç¬¬ i ä¸ªæ•°æ¥åˆ°ç¬¬ j ä¸ªæ•°å­—çš„åè¾¹ä½œä¸ºä¸€ä¸ªæ–°çš„ä¸Šå‡å­åºåˆ—
			if nums[j] < nums[i] {
				// è¿™é‡Œä¸å¥½ç†è§£ï¼ˆtodoï¼‰
				dp[i] = MaxInt(dp[i], dp[j]+1)
			}
		}
		res = MaxInt(res, dp[i])
	}
	return res
}

/*
	æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’+äºŒåˆ†æŸ¥æ‰¾
	(question)æ²¡æ‡‚ğŸ˜…ï¼Œéš¾æ‡‚
*/
func lengthOfLIS(nums []int) int {
	res := 0 // tailså½“å‰é•¿åº¦
	n := len(nums)
	// tails[k] çš„å€¼ä»£è¡¨ é•¿åº¦ä¸º k+1k+1 å­åºåˆ— çš„å°¾éƒ¨å…ƒç´ å€¼
	tail := make([]int, n)
	for i := 0; i < n; i++ {
		poker := nums[i]
		left, right := 0, res
		for left < right {
			mid := (left + right) >> 1
			if tail[mid] >= poker {
				right = mid
			} else {
				left = mid + 1
			}
		}
		if left == res {
			res++
		}
		tail[left] = poker
	}
	return res
}