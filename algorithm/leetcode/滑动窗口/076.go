/*
	æ–¹æ³•1ï¼šæ»‘åŠ¨çª—å£
		1. ç»Ÿè®¡tä¸­å­—ç¬¦çš„ç§ç±»å’Œæ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°
		2. åŒæŒ‡é’ˆleft,right
		3. ç§»åŠ¨rightï¼Œæ£€æŸ¥å½“å‰å…ƒç´ æ˜¯å¦åœ¨tä¸­
		4. è‹¥å­˜åœ¨ï¼Œæ›´æ–°çª—å£å†…å®¹ï¼Œæ£€æŸ¥æ˜¯å¦æ»¡è¶³tå…ƒç´ ç§ç±»å’Œä¸ªæ•°
		5. è‹¥æ»¡è¶³è¦æ±‚ï¼Œå³ç§»leftæ”¶ç¼©çª—å£ï¼Œæ”¶ç¼©çš„è¿‡ç¨‹ä¸­æ›´æ–°çª—å£å†…å®¹
*/
func minWindow(s string, t string) string {
	need := make(map[byte]int, 0)
	// needSize è¦æ»¡è¶³çš„å…ƒç´ ä¸ªæ•°
	needSize := 0
	for i := 0; i < len(t); i++ {
		c := t[i]
		need[c]++
		if need[c] == 1 {
			// è¦æ»¡è¶³çš„å…ƒç´ ç§ç±»
			needSize++
		}
	}

	// valid å½“å‰å·²æ»¡è¶³çš„å…ƒç´ ä¸ªæ•°
	left, right, valid := 0, 0, 0, 0
	window := make(map[byte]int, 0)
	var res string
	for right < len(s) {
		// å°†è¦å…¥çª—å£çš„å­—ç¬¦
		c := s[right]
		// ç§»åŠ¨å³è¾¹æŒ‡é’ˆ
		right++
		// è‹¥å½“å‰å­—ç¬¦å­˜åœ¨äºtä¸­
		if _, ok := need[c]; ok {
			window[c]++
			if window[c] == need[c] {
				valid++
			}
		}

		// ğŸ˜… æŒç»­æ”¶ç¼©ï¼Œåˆ¤æ–­å·¦ä¾§è¾¹ç•Œæ˜¯å¦éœ€è¦æ”¶ç¼©
		for valid == needSize {
			// æ›´æ–°æœ€å°è¦†ç›–å­—ä¸²
			if len(res) == 0 || len(res) > right-left {
				res = s[left:right]
			}
			// å°†è¦ç§»é™¤çª—å£çš„å­—ç¬¦
			d := s[left]
			// å‘å·¦ç§»åŠ¨å·¦è¾¹æŒ‡é’ˆ ğŸ˜…ğŸ˜…ğŸ˜… ä¸ºä»€ä¹ˆä¸éœ€è¦åˆ¤æ–­leftæ˜¯å¦è¶Šç•Œ
			left++
			// è‹¥å½“å‰å­—ç¬¦å­˜åœ¨äºtä¸­
			if _, ok := need[d]; ok {
				if window[d] == need[d] {
					valid--
				}
				window[d]--
			}
		}
	}
	return res
}

/*
	æ–¹æ³•2ï¼šæ»‘åŠ¨çª—å£ï¼ˆä¼˜åŒ–ç‰ˆï¼‰(question) ğŸ˜…ğŸ˜…ğŸ˜…
		TODO
*/
func minWindow2(s1 string, t1 string) string {
	// needå§‹ç»ˆè®°å½•ç€å½“å‰æ»‘åŠ¨çª—å£ä¸‹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çš„å…ƒç´ ç§ç±»
	need := make(map[byte]int, 0)
	// è®°å½•æ‰€éœ€å…ƒç´ ç§ç±»
	cnt := 0
	// å­—ç¬¦ä¸²éå†ï¼šrangeéå†çš„ç»“æœæ˜¯runeï¼Œforä¾¿åˆ©çš„ç»“æœæ˜¯byte
	for i := 0; i < len(t1); i++ {
		c := t1[i]
		need[c]++
		if need[c] == 1 {
			cnt++
		}
	}

	var res string

	// æ•°é‡ä¸ºè´Ÿçš„å°±æ˜¯ä¸å¿…è¦çš„å…ƒç´ ï¼Œè€Œæ•°é‡ä¸º1è¡¨ç¤ºåˆšåˆšå¥½
	// ä»å‰å¾€åç»´æŠ¤çª—å£ã€‚iå…ˆèµ°ï¼Œjåœ¨å
	for i, j, count := 0, 0, 0; i < len(s1); i++ {
		// (question)æ²¡çœ‹æ‡‚ï¼›ä¸ºä»€ä¹ˆcountåªåŠ ä¸å‡ï¼Œneedä¸­æœ‰åŠ æœ‰å‡ï¼Œcountä¸ºä»€ä¹ˆå°±ç‰¹æ®Šäº†ğŸ˜…
		// æ»¡è¶³å½“å‰å­—æ¯å’Œä¸ªæ•°
		if need[s1[i]] == 1 {
			count++
		}
		// éœ€è¦çš„å­—æ¯ä¸ªæ•°å‡å‡
		need[s1[i]]--
		// å½“å‰å­—æ¯æ— å…³ç´§è¦(æ•°é‡ä¸ºè´Ÿçš„å°±æ˜¯ä¸å¿…è¦çš„å…ƒç´ )ï¼Œjå¯ä»¥å‘åç§»åŠ¨
		for j < i && need[s1[j]] < 0 {
			need[s1[j]]++
			j++
		}
		// å¦‚ä½•åˆ¤æ–­æ»‘åŠ¨çª—å£åŒ…å«äº†Tçš„æ‰€æœ‰å…ƒç´ ï¼Ÿç»“è®ºå°±æ˜¯å½“needä¸­æ‰€æœ‰å…ƒç´ çš„æ•°é‡éƒ½å°äºç­‰äº0æ—¶ï¼Œè¡¨ç¤ºå½“å‰æ»‘åŠ¨çª—å£ä¸å†éœ€è¦ä»»ä½•å…ƒç´ 
		if count == cnt {
			if len(res) == 0 || len(res) > i-j+1 {
				res = s1[j : i+1]
			}
		}
	}
	return res
}