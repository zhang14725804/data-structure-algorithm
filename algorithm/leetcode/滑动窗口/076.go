/*
	æ–¹æ³•1ï¼šæ»‘åŠ¨çª—å£
	å¦‚ä½•å¿«é€Ÿåˆ¤æ–­å½“å‰å­—ä¸²æ˜¯å¦åŒ…å«tä¸­æ‰€æœ‰å­—æ¯ï¼Œhashæˆ–æ•°ç»„
	TODO ğŸ˜…ğŸ˜…ğŸ˜…
*/
func minWindow(s string, t string) string {
	// éœ€è¦æ»¡è¶³çš„å­—ç¬¦åŠå…¶ä¸ªæ•°ç»„æˆçš„map
	need := make(map[byte]int, 0)
	window := make(map[byte]int, 0)
	// needSize è¦æ»¡è¶³çš„å…ƒç´ ä¸ªæ•°
	// valid å½“å‰å·²æ»¡è¶³çš„å…ƒç´ ä¸ªæ•°
	needSize, left, right, valid := 0, 0, 0, 0
	for i := 0; i < len(t); i++ {
		c := t[i]
		need[c]++
		if need[c] == 1 {
			// è¦æ»¡è¶³çš„å…ƒç´ ç§ç±»
			needSize++
		}
	}

	var res string
	for right < len(s) {
		// å°†è¦å…¥çª—å£çš„å­—ç¬¦
		c := s[right]
		// ç§»åŠ¨å³è¾¹æŒ‡é’ˆ
		right++
		// è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°
		if _, ok := need[c]; ok {
			window[c]++
			if window[c] == need[c] {
				valid++
			}
		}
		// åˆ¤æ–­å·¦ä¾§è¾¹ç•Œæ˜¯å¦éœ€è¦æ”¶ç¼©
		for valid == needSize {
			// æ›´æ–°æœ€å°è¦†ç›–å­—ä¸²
			if len(res) == 0 || len(res) > right-left {
				res = s[left:right]
			}
			// å°†è¦ç§»é™¤çª—å£çš„å­—ç¬¦
			d := s[left]
			// å‘å·¦ç§»åŠ¨å·¦è¾¹æŒ‡é’ˆ
			left++
			// è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°
			if _, ok := need[d]; ok {
				if window[d] == need[d] {
					valid--
				}
				window[d]--
			}
		}
	}
	return res
}

/*
	æ–¹æ³•2ï¼šæ»‘åŠ¨çª—å£ï¼ˆä¼˜åŒ–ç‰ˆï¼‰(question) ğŸ˜…ğŸ˜…ğŸ˜…
	å¦‚ä½•å¿«é€Ÿåˆ¤æ–­å½“å‰å­—ä¸²æ˜¯å¦åŒ…å«tä¸­æ‰€æœ‰å­—æ¯ï¼Œhashæˆ–æ•°ç»„
*/
func minWindow2(s1 string, t1 string) string {
	// needå§‹ç»ˆè®°å½•ç€å½“å‰æ»‘åŠ¨çª—å£ä¸‹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çš„å…ƒç´ æ•°é‡
	// æ•°é‡ä¸ºè´Ÿçš„å°±æ˜¯ä¸å¿…è¦çš„å…ƒç´ ï¼Œè€Œæ•°é‡ä¸º0è¡¨ç¤ºåˆšåˆšå¥½
	need := make(map[byte]int, 0)
	// è®°å½•æ‰€éœ€å…ƒç´ çš„æ€»æ•°é‡ï¼ˆä¸åŒå­—æ¯çš„ç§ç±»ï¼‰
	cnt := 0
	// å­—ç¬¦ä¸²éå†ï¼šrangeéå†çš„ç»“æœæ˜¯runeï¼Œforä¾¿åˆ©çš„ç»“æœæ˜¯byte
	for i := 0; i < len(t1); i++ {
		c := t1[i]
		need[c]++
		if need[c] == 1 {
			cnt++
		}
	}

	var res string

	// ä»å‰å¾€åç»´æŠ¤çª—å£ã€‚iå…ˆèµ°ï¼Œjåœ¨å
	for i, j, count := 0, 0, 0; i < len(s1); i++ {
		// (question)æ²¡çœ‹æ‡‚ï¼›ä¸ºä»€ä¹ˆcountåªåŠ ä¸å‡ï¼Œneedä¸­æœ‰åŠ æœ‰å‡ï¼Œcountä¸ºä»€ä¹ˆå°±ç‰¹æ®Šäº†ğŸ˜…
		// æ»¡è¶³å½“å‰å­—æ¯å’Œä¸ªæ•°
		if need[s1[i]] == 1 {
			count++
		}
		// éœ€è¦çš„å­—æ¯ä¸ªæ•°å‡å‡
		need[s1[i]]--
		// å½“å‰å­—æ¯æ— å…³ç´§è¦(æ•°é‡ä¸ºè´Ÿçš„å°±æ˜¯ä¸å¿…è¦çš„å…ƒç´ )ï¼Œjå¯ä»¥å‘åç§»åŠ¨
		for j < i && need[s1[j]] < 0 {
			need[s1[j]]++
			j++
		}
		// å¦‚ä½•åˆ¤æ–­æ»‘åŠ¨çª—å£åŒ…å«äº†Tçš„æ‰€æœ‰å…ƒç´ ï¼Ÿç»“è®ºå°±æ˜¯å½“needä¸­æ‰€æœ‰å…ƒç´ çš„æ•°é‡éƒ½å°äºç­‰äº0æ—¶ï¼Œè¡¨ç¤ºå½“å‰æ»‘åŠ¨çª—å£ä¸å†éœ€è¦ä»»ä½•å…ƒç´ 
		if count == cnt {
			if len(res) == 0 || len(res) > i-j+1 {
				res = s1[j : i+1]
			}
		}
	}
	return res
}